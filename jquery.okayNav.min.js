/* jquery.okayNav.js 1.0.1
* Created by Vergil Penkov (http://vergilpenkov.com/), MIT license. */
!function(n,a,i,e){function t(a,e){this.options=n.extend({},v,e),_okayNav=this,_invisibleNavState=!1,_options=this.options,$document=n(i),$body=n("body"),$navigation=n(a),""==this.options.nav_parent?this.options.nav_parent=$navigation.parent():"",_okayNav.init()}var o="okayNav",v={nav_parent:"",nav_toggle_icon_class:"okayNav__menu-toggle",nav_toggle_icon_content:"<span /><span /><span />",nav_beforeopen:function(){},nav_open:function(){},nav_beforeclose:function(){},nav_close:function(){}};t.prototype={init:function(){_okayNav.setupElements($navigation),$nav_visible=$navigation.children(".okayNav__nav--visible"),$nav_invisible=$navigation.children(".okayNav__nav--invisible"),$nav_toggle_icon=$navigation.children("."+_options.nav_toggle_icon_class),_nav_toggle_icon_width=$nav_toggle_icon.outerWidth(),_last_visible_child_width=0,_okayNav.initEvents()},setupElements:function(){$body.addClass("okayNav-loaded"),$navigation.addClass("okayNav loaded").children("ul").addClass("okayNav__nav--visible"),$navigation.append('<ul class="okayNav__nav--invisible" />').append('<a href="#" class="'+_options.nav_toggle_icon_class+'">'+_options.nav_toggle_icon_content+"</a>")},initEvents:function(){$document.on("click.okayNav","."+_options.nav_toggle_icon_class,function(n){n.preventDefault(),_okayNav.toggleInvisibleNav()}),$document.on("click.okayNav",function(a){if(_invisibleNavState===!0){var i=n(a.target);i.parents().hasClass("okayNav")||_okayNav.closeInvisibleNav()}}),n(a).on("load.okayNav resize.okayNav",function(){_okayNav.recalcNav()})},getParent:function(){return _options.nav_parent},getVisibleNav:function(){return $nav_visible},getInvisibleNav:function(){return $nav_invisible},getNavToggleIcon:function(){return $nav_toggle_icon},openInvisibleNav:function(){_options.nav_beforeopen.call(),$nav_toggle_icon.addClass("icon--active"),$nav_invisible.addClass("nav-open"),_invisibleNavState=!0,_options.nav_open.call(),$document.trigger("okayNav:open")},closeInvisibleNav:function(){_options.nav_beforeclose.call(),$nav_toggle_icon.removeClass("icon--active"),$nav_invisible.removeClass("nav-open"),_invisibleNavState=!1,_options.nav_close.call(),$document.trigger("okayNav:close")},toggleInvisibleNav:function(){_invisibleNavState?(_invisibleNavState=!1,_okayNav.closeInvisibleNav()):(_invisibleNavState=!0,_okayNav.openInvisibleNav())},getParentWidth:function(a){var i=a||_options.nav_parent,e=n(i).outerWidth();return e},getChildrenWidth:function(a){var i=0;return n(a).children().each(function(){i+=n(this).outerWidth(!0)}),i},countNavItems:function(a){var i=n(a),e=n("li",i).length;return e},recalcNav:function(){var a=n(_options.nav_parent).outerWidth(),i=$navigation.outerWidth(),e=_okayNav.countNavItems($nav_visible),t=$nav_visible.outerWidth()+_nav_toggle_icon_width,o=_okayNav.getChildrenWidth(_options.nav_parent)+_last_visible_child_width+_nav_toggle_icon_width;e>0&&t>i&&_okayNav.collapseNavItem(),a>o&&_okayNav.expandNavItem(),0==n("li",$nav_invisible).length?$nav_toggle_icon.hide():$nav_toggle_icon.show()},collapseNavItem:function(){var a=n("li:last-child",$nav_visible);_last_visible_child_width=a.outerWidth(),a.detach().prependTo($nav_invisible),_okayNav.recalcNav(),$document.trigger("okayNav:collapseItem")},expandNavItem:function(){n("li:first-child",$nav_invisible).detach().appendTo($nav_visible),$document.trigger("okayNav:expandItem")},destroy:function(){n("li",$nav_invisible).appendTo($nav_visible),$nav_invisible.remove(),$nav_visible.removeClass("okayNav__nav--visible"),$nav_toggle_icon.remove(),$document.unbind(".okayNav"),n(a).unbind(".okayNav")}},n.fn[o]=function(a){var i=arguments;if(a===e||"object"==typeof a)return this.each(function(){n.data(this,"plugin_"+o)||n.data(this,"plugin_"+o,new t(this,a))});if("string"==typeof a&&"_"!==a[0]&&"init"!==a){var v;return this.each(function(){var e=n.data(this,"plugin_"+o);e instanceof t&&"function"==typeof e[a]&&(v=e[a].apply(e,Array.prototype.slice.call(i,1))),"destroy"===a&&n.data(this,"plugin_"+o,null)}),v!==e?v:this}}}(jQuery,window,document);
